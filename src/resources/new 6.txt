class Solution {
  int msum = Integer.MIN_VALUE;

  public int mg(TreeNode node) {
    if (node == null) return 0;
    int lg = Math.max(mg(node.left), 0);
    int rg = Math.max(mg(node.right), 0);
    int price = node.val + lg + rg;
    msum = Math.max(msum, price);
    return node.val + Math.max(lg, rg);
  }

  public int maxPathSum(TreeNode root) {
    mg(root);
    return msum;
  }
}